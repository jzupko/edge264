#define TRACE 1
#include "edge264.c"

#define RED   "\x1b[31m"
#define GREEN "\x1b[32m"
#define RESET "\x1b[0m"

void test4x4_8bit(int mode, const char *name, const uint8_t result[16]) {
	ctx->PredMode[0] = mode;
	printf("%s: ", name);
	decode_samples();
	
	uint8_t *p = ctx->plane;
	if (memcmp(p, result, 4) == 0 && memcmp(p + 32, result + 4, 4) == 0 &&
		memcmp(p + 64, result + 8, 4) == 0 && memcmp(p + 96, result + 12, 4) == 0) {
		puts(GREEN "PASS" RESET);
	} else {
		puts(RED "FAIL" RESET);
		for (int r = -1; r < 4; r++) {
			for (int c = -1; c < 4; c++)
				printf("%3d ", p[r * 32 + c]);
			putchar('\n');
		}
		exit(0);
	}
}

void test4x4_16bit(int mode, const char *name, const uint16_t result[16]) {
	ctx->PredMode[0] = mode;
	printf("%s: ", name);
	decode_samples();
	
	uint16_t *p = (uint16_t *)ctx->plane;
	if (memcmp(p, result, 8) == 0 && memcmp(p + 32, result + 4, 8) == 0 &&
		memcmp(p + 64, result + 8, 8) == 0 && memcmp(p + 96, result + 12, 4) == 0) {
		puts(GREEN "PASS" RESET);
	} else {
		puts(RED "FAIL" RESET);
		for (int r = -1; r < 4; r++) {
			for (int c = -1; c < 4; c++)
				printf("%5d ", p[r * 32 + c]);
			putchar('\n');
		}
		exit(0);
	}
}

void test8x8_8bit(int mode, const char *name, const uint8_t result[64]) {
	ctx->PredMode[0] = mode;
	printf("%s: ", name);
	decode_samples();
	
	uint8_t *p = ctx->plane;
	if (memcmp(p, result, 8) == 0 && memcmp(p + 32, result + 8, 8) == 0 &&
		memcmp(p + 64, result + 16, 8) == 0 && memcmp(p + 96, result + 24, 8) == 0 &&
		memcmp(p + 128, result + 32, 8) == 0 && memcmp(p + 160, result + 40, 8) == 0 &&
		memcmp(p + 192, result + 48, 8) == 0 && memcmp(p + 224, result + 56, 8) == 0) {
		puts(GREEN "PASS" RESET);
	} else {
		puts(RED "FAIL" RESET);
		for (int r = -1; r < 8; r++) {
			for (int c = -1; c < 8; c++)
				printf("%3d ", p[r * 32 + c]);
			putchar('\n');
		}
		exit(0);
	}
}

void test8x8_16bit(int mode, const char *name, const uint16_t result[64]) {
	ctx->PredMode[0] = mode;
	printf("%s: ", name);
	decode_samples();
	
	uint16_t *p = (uint16_t *)ctx->plane;
	if (memcmp(p, result, 16) == 0 && memcmp(p + 32, result + 8, 16) == 0 &&
		memcmp(p + 64, result + 16, 16) == 0 && memcmp(p + 96, result + 24, 16) == 0 &&
		memcmp(p + 128, result + 32, 16) == 0 && memcmp(p + 160, result + 40, 16) == 0 &&
		memcmp(p + 192, result + 48, 16) == 0 && memcmp(p + 224, result + 56, 16) == 0) {
		puts(GREEN "PASS" RESET);
	} else {
		puts(RED "FAIL" RESET);
		for (int r = -1; r < 8; r++) {
			for (int c = -1; c < 8; c++)
				printf("%5d ", p[r * 32 + c]);
			putchar('\n');
		}
		exit(0);
	}
}



int main() {
	uint8_t *p = malloc(64 * 17) + 96;
	for (int i = 16; i-- > 0;)
		p[32 * i - 1] = 186 - i * 4;
	for (int i = -1; i < 16; i++)
		p[i - 32] = 194 + i * 4;
	Edge264_ctx c = {
		.plane = p,
		.clip = (v8hi){255, 255, 255, 255, 255, 255, 255, 255},
		.stride = 32,
	};
	ctx = &c;
	
#define test(str, ...) test4x4_8bit(str, #str , (uint8_t[]){__VA_ARGS__})
	test(VERTICAL_4x4, 194, 198, 202, 206, 194, 198, 202, 206, 194, 198, 202, 206, 194, 198, 202, 206);
	test(HORIZONTAL_4x4, 186, 186, 186, 186, 182, 182, 182, 182, 178, 178, 178, 178, 174, 174, 174, 174);
	test(DC_4x4, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190);
	test(DC_4x4_A, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200);
	test(DC_4x4_B, 180, 180, 180, 180, 180, 180, 180, 180, 180, 180, 180, 180, 180, 180, 180, 180);
	test(DC_4x4_AB, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128);
	test(DIAGONAL_DOWN_LEFT_4x4, 198, 202, 206, 210, 202, 206, 210, 214, 206, 210, 214, 218, 210, 214, 218, 221);
	test(DIAGONAL_DOWN_LEFT_4x4_C, 198, 202, 205, 206, 202, 205, 206, 206, 205, 206, 206, 206, 206, 206, 206, 206);
	test(DIAGONAL_DOWN_RIGHT_4x4, 190, 194, 198, 202, 186, 190, 194, 198, 182, 186, 190, 194, 178, 182, 186, 190);
	test(VERTICAL_RIGHT_4x4, 192, 196, 200, 204, 190, 194, 198, 202, 186, 192, 196, 200, 182, 190, 194, 198);
	test(HORIZONTAL_DOWN_4x4, 188, 190, 194, 198, 184, 186, 188, 190, 180, 182, 184, 186, 176, 178, 180, 182);
	test(VERTICAL_LEFT_4x4, 196, 200, 204, 208, 198, 202, 206, 210, 200, 204, 208, 212, 202, 206, 210, 214);
	test(VERTICAL_LEFT_4x4_C, 196, 200, 204, 206, 198, 202, 205, 206, 200, 204, 206, 206, 202, 205, 206, 206);
	test(HORIZONTAL_UP_4x4, 184, 182, 180, 178, 180, 178, 176, 175, 176, 175, 174, 174, 174, 174, 174, 174);
	putchar('\n');
#undef test
	
#define test(str, ...) test8x8_8bit(str, #str , (uint8_t[]){__VA_ARGS__})
	test(VERTICAL_8x8, 194, 198, 202, 206, 210, 214, 218, 222, 194, 198, 202, 206, 210, 214, 218, 222, 194, 198, 202, 206, 210, 214, 218, 222, 194, 198, 202, 206, 210, 214, 218, 222, 194, 198, 202, 206, 210, 214, 218, 222, 194, 198, 202, 206, 210, 214, 218, 222, 194, 198, 202, 206, 210, 214, 218, 222, 194, 198, 202, 206, 210, 214, 218, 222);
	test(VERTICAL_8x8_C, 194, 198, 202, 206, 210, 214, 218, 221, 194, 198, 202, 206, 210, 214, 218, 221, 194, 198, 202, 206, 210, 214, 218, 221, 194, 198, 202, 206, 210, 214, 218, 221, 194, 198, 202, 206, 210, 214, 218, 221, 194, 198, 202, 206, 210, 214, 218, 221, 194, 198, 202, 206, 210, 214, 218, 221, 194, 198, 202, 206, 210, 214, 218, 221);
	test(VERTICAL_8x8_D, 195, 198, 202, 206, 210, 214, 218, 222, 195, 198, 202, 206, 210, 214, 218, 222, 195, 198, 202, 206, 210, 214, 218, 222, 195, 198, 202, 206, 210, 214, 218, 222, 195, 198, 202, 206, 210, 214, 218, 222, 195, 198, 202, 206, 210, 214, 218, 222, 195, 198, 202, 206, 210, 214, 218, 222, 195, 198, 202, 206, 210, 214, 218, 222);
	test(VERTICAL_8x8_CD, 195, 198, 202, 206, 210, 214, 218, 221, 195, 198, 202, 206, 210, 214, 218, 221, 195, 198, 202, 206, 210, 214, 218, 221, 195, 198, 202, 206, 210, 214, 218, 221, 195, 198, 202, 206, 210, 214, 218, 221, 195, 198, 202, 206, 210, 214, 218, 221, 195, 198, 202, 206, 210, 214, 218, 221, 195, 198, 202, 206, 210, 214, 218, 221);
	test(HORIZONTAL_8x8, 186, 186, 186, 186, 186, 186, 186, 186, 182, 182, 182, 182, 182, 182, 182, 182, 178, 178, 178, 178, 178, 178, 178, 178, 174, 174, 174, 174, 174, 174, 174, 174, 170, 170, 170, 170, 170, 170, 170, 170, 166, 166, 166, 166, 166, 166, 166, 166, 162, 162, 162, 162, 162, 162, 162, 162, 159, 159, 159, 159, 159, 159, 159, 159);
	test(HORIZONTAL_8x8_D, 185, 185, 185, 185, 185, 185, 185, 185, 182, 182, 182, 182, 182, 182, 182, 182, 178, 178, 178, 178, 178, 178, 178, 178, 174, 174, 174, 174, 174, 174, 174, 174, 170, 170, 170, 170, 170, 170, 170, 170, 166, 166, 166, 166, 166, 166, 166, 166, 162, 162, 162, 162, 162, 162, 162, 162, 159, 159, 159, 159, 159, 159, 159, 159);
	test(DC_8x8, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190);
	test(DC_8x8_C, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190);
	test(DC_8x8_D, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190);
	test(DC_8x8_CD, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190);
	test(DC_8x8_A, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208);
	test(DC_8x8_AC, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208);
	test(DC_8x8_AD, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208);
	test(DC_8x8_ACD, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208, 208);
	test(DC_8x8_B, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172);
	test(DC_8x8_BD, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172, 172);
	test(DC_8x8_AB, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128);
	test(DIAGONAL_DOWN_LEFT_8x8, 198, 202, 206, 210, 214, 218, 222, 226, 202, 206, 210, 214, 218, 222, 226, 230, 206, 210, 214, 218, 222, 226, 230, 234, 210, 214, 218, 222, 226, 230, 234, 238, 214, 218, 222, 226, 230, 234, 238, 242, 218, 222, 226, 230, 234, 238, 242, 246, 222, 226, 230, 234, 238, 242, 246, 250, 226, 230, 234, 238, 242, 246, 250, 252);
	test(DIAGONAL_DOWN_LEFT_8x8_C, 198, 202, 206, 210, 214, 218, 221, 222, 202, 206, 210, 214, 218, 221, 222, 222, 206, 210, 214, 218, 221, 222, 222, 222, 210, 214, 218, 221, 222, 222, 222, 222, 214, 218, 221, 222, 222, 222, 222, 222, 218, 221, 222, 222, 222, 222, 222, 222, 221, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222);
	test(DIAGONAL_DOWN_LEFT_8x8_D, 198, 202, 206, 210, 214, 218, 222, 226, 202, 206, 210, 214, 218, 222, 226, 230, 206, 210, 214, 218, 222, 226, 230, 234, 210, 214, 218, 222, 226, 230, 234, 238, 214, 218, 222, 226, 230, 234, 238, 242, 218, 222, 226, 230, 234, 238, 242, 246, 222, 226, 230, 234, 238, 242, 246, 250, 226, 230, 234, 238, 242, 246, 250, 252);
	test(DIAGONAL_DOWN_LEFT_8x8_CD, 198, 202, 206, 210, 214, 218, 221, 222, 202, 206, 210, 214, 218, 221, 222, 222, 206, 210, 214, 218, 221, 222, 222, 222, 210, 214, 218, 221, 222, 222, 222, 222, 214, 218, 221, 222, 222, 222, 222, 222, 218, 221, 222, 222, 222, 222, 222, 222, 221, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222);
	test(DIAGONAL_DOWN_RIGHT_8x8, 190, 194, 198, 202, 206, 210, 214, 218, 186, 190, 194, 198, 202, 206, 210, 214, 182, 186, 190, 194, 198, 202, 206, 210, 178, 182, 186, 190, 194, 198, 202, 206, 174, 178, 182, 186, 190, 194, 198, 202, 170, 174, 178, 182, 186, 190, 194, 198, 166, 170, 174, 178, 182, 186, 190, 194, 162, 166, 170, 174, 178, 182, 186, 190);
	test(DIAGONAL_DOWN_RIGHT_8x8_C, 190, 194, 198, 202, 206, 210, 214, 218, 186, 190, 194, 198, 202, 206, 210, 214, 182, 186, 190, 194, 198, 202, 206, 210, 178, 182, 186, 190, 194, 198, 202, 206, 174, 178, 182, 186, 190, 194, 198, 202, 170, 174, 178, 182, 186, 190, 194, 198, 166, 170, 174, 178, 182, 186, 190, 194, 162, 166, 170, 174, 178, 182, 186, 190);
	test(VERTICAL_RIGHT_8x8, 192, 196, 200, 204, 208, 212, 216, 220, 190, 194, 198, 202, 206, 210, 214, 218, 186, 192, 196, 200, 204, 208, 212, 216, 182, 190, 194, 198, 202, 206, 210, 214, 178, 186, 192, 196, 200, 204, 208, 212, 174, 182, 190, 194, 198, 202, 206, 210, 170, 178, 186, 192, 196, 200, 204, 208, 166, 174, 182, 190, 194, 198, 202, 206);
	test(VERTICAL_RIGHT_8x8_C, 192, 196, 200, 204, 208, 212, 216, 220, 190, 194, 198, 202, 206, 210, 214, 218, 186, 192, 196, 200, 204, 208, 212, 216, 182, 190, 194, 198, 202, 206, 210, 214, 178, 186, 192, 196, 200, 204, 208, 212, 174, 182, 190, 194, 198, 202, 206, 210, 170, 178, 186, 192, 196, 200, 204, 208, 166, 174, 182, 190, 194, 198, 202, 206);
	test(HORIZONTAL_DOWN_8x8, 188, 190, 194, 198, 202, 206, 210, 214, 184, 186, 188, 190, 194, 198, 202, 206, 180, 182, 184, 186, 188, 190, 194, 198, 176, 178, 180, 182, 184, 186, 188, 190, 172, 174, 176, 178, 180, 182, 184, 186, 168, 170, 172, 174, 176, 178, 180, 182, 164, 166, 168, 170, 172, 174, 176, 178, 161, 162, 164, 166, 168, 170, 172, 174);
	test(VERTICAL_LEFT_8x8, 196, 200, 204, 208, 212, 216, 220, 224, 198, 202, 206, 210, 214, 218, 222, 226, 200, 204, 208, 212, 216, 220, 224, 228, 202, 206, 210, 214, 218, 222, 226, 230, 204, 208, 212, 216, 220, 224, 228, 232, 206, 210, 214, 218, 222, 226, 230, 234, 208, 212, 216, 220, 224, 228, 232, 236, 210, 214, 218, 222, 226, 230, 234, 238);
	test(VERTICAL_LEFT_8x8_C, 196, 200, 204, 208, 212, 216, 220, 222, 198, 202, 206, 210, 214, 218, 221, 222, 200, 204, 208, 212, 216, 220, 222, 222, 202, 206, 210, 214, 218, 221, 222, 222, 204, 208, 212, 216, 220, 222, 222, 222, 206, 210, 214, 218, 221, 222, 222, 222, 208, 212, 216, 220, 222, 222, 222, 222, 210, 214, 218, 221, 222, 222, 222, 222);
	test(VERTICAL_LEFT_8x8_D, 197, 200, 204, 208, 212, 216, 220, 224, 198, 202, 206, 210, 214, 218, 222, 226, 200, 204, 208, 212, 216, 220, 224, 228, 202, 206, 210, 214, 218, 222, 226, 230, 204, 208, 212, 216, 220, 224, 228, 232, 206, 210, 214, 218, 222, 226, 230, 234, 208, 212, 216, 220, 224, 228, 232, 236, 210, 214, 218, 222, 226, 230, 234, 238);
	test(VERTICAL_LEFT_8x8_CD, 197, 200, 204, 208, 212, 216, 220, 222, 198, 202, 206, 210, 214, 218, 221, 222, 200, 204, 208, 212, 216, 220, 222, 222, 202, 206, 210, 214, 218, 221, 222, 222, 204, 208, 212, 216, 220, 222, 222, 222, 206, 210, 214, 218, 221, 222, 222, 222, 208, 212, 216, 220, 222, 222, 222, 222, 210, 214, 218, 221, 222, 222, 222, 222);
	test(HORIZONTAL_UP_8x8, 184, 182, 180, 178, 176, 174, 172, 170, 180, 178, 176, 174, 172, 170, 168, 166, 176, 174, 172, 170, 168, 166, 164, 162, 172, 170, 168, 166, 164, 162, 161, 160, 168, 166, 164, 162, 161, 160, 159, 159, 164, 162, 161, 160, 159, 159, 159, 159, 161, 160, 159, 159, 159, 159, 159, 159, 159, 159, 159, 159, 159, 159, 159, 159);
	putchar('\n');
#undef test
	
	uint16_t *q = (uint16_t *)p;
	for (int i = 16; i-- > 0;)
		q[32 * i - 1] = 16314 - i * 4;
	for (int i = -1; i < 16; i++)
		q[i - 32] = 16322 + i * 4;
	ctx->plane = p;
	ctx->clip = (v8hi){16383, 16383, 16383, 16383, 16383, 16383, 16383, 16383},
	ctx->stride = 64;
	
#define test(str, ...) test4x4_16bit(str, #str , (uint16_t[]){__VA_ARGS__})
	test(VERTICAL_4x4_16_BIT, 16322, 16326, 16330, 16334, 16322, 16326, 16330, 16334, 16322, 16326, 16330, 16334, 16322, 16326, 16330, 16334);
	test(HORIZONTAL_4x4_16_BIT, 16314, 16314, 16314, 16314, 16310, 16310, 16310, 16310, 16306, 16306, 16306, 16306, 16302, 16302, 16302, 16302);
	test(DC_4x4_16_BIT, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318);
	test(DC_4x4_A_16_BIT, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328, 16328);
	test(DC_4x4_B_16_BIT, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308, 16308);
	test(DC_4x4_AB_16_BIT, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192);
	test(DIAGONAL_DOWN_LEFT_4x4_16_BIT, 16326, 16330, 16334, 16338, 16330, 16334, 16338, 16342, 16334, 16338, 16342, 16346, 16338, 16342, 16346, 16349);
	test(DIAGONAL_DOWN_LEFT_4x4_C_16_BIT, 16326, 16330, 16333, 16334, 16330, 16333, 16334, 16334, 16333, 16334, 16334, 16334, 16334, 16334, 16334, 16334);
	test(DIAGONAL_DOWN_RIGHT_4x4_16_BIT, 16318, 16322, 16326, 16330, 16314, 16318, 16322, 16326, 16310, 16314, 16318, 16322, 16306, 16310, 16314, 16318);
	test(VERTICAL_RIGHT_4x4_16_BIT, 16320, 16324, 16328, 16332, 16318, 16322, 16326, 16330, 16314, 16320, 16324, 16328, 16310, 16318, 16322, 16326);
	test(HORIZONTAL_DOWN_4x4_16_BIT, 16316, 16318, 16322, 16326, 16312, 16314, 16316, 16318, 16308, 16310, 16312, 16314, 16304, 16306, 16308, 16310);
	test(VERTICAL_LEFT_4x4_16_BIT, 16324, 16328, 16332, 16336, 16326, 16330, 16334, 16338, 16328, 16332, 16336, 16340, 16330, 16334, 16338, 16342);
	test(VERTICAL_LEFT_4x4_C_16_BIT, 16324, 16328, 16332, 16334, 16326, 16330, 16333, 16334, 16328, 16332, 16334, 16334, 16330, 16333, 16334, 16334);
	test(HORIZONTAL_UP_4x4_16_BIT, 16312, 16310, 16308, 16306, 16308, 16306, 16304, 16303, 16304, 16303, 16302, 16302, 16302, 16302, 16302, 16302);
	putchar('\n');
#undef test
	
#define test(str, ...) test8x8_16bit(str, #str , (uint16_t[]){__VA_ARGS__})
	test(VERTICAL_8x8_16_BIT, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16350);
	test(VERTICAL_8x8_C_16_BIT, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16349);
	test(VERTICAL_8x8_D_16_BIT, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16350);
	test(VERTICAL_8x8_CD_16_BIT, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16323, 16326, 16330, 16334, 16338, 16342, 16346, 16349);
	test(HORIZONTAL_8x8_16_BIT, 16314, 16314, 16314, 16314, 16314, 16314, 16314, 16314, 16310, 16310, 16310, 16310, 16310, 16310, 16310, 16310, 16306, 16306, 16306, 16306, 16306, 16306, 16306, 16306, 16302, 16302, 16302, 16302, 16302, 16302, 16302, 16302, 16298, 16298, 16298, 16298, 16298, 16298, 16298, 16298, 16294, 16294, 16294, 16294, 16294, 16294, 16294, 16294, 16290, 16290, 16290, 16290, 16290, 16290, 16290, 16290, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287);
	test(HORIZONTAL_8x8_D_16_BIT, 16313, 16313, 16313, 16313, 16313, 16313, 16313, 16313, 16310, 16310, 16310, 16310, 16310, 16310, 16310, 16310, 16306, 16306, 16306, 16306, 16306, 16306, 16306, 16306, 16302, 16302, 16302, 16302, 16302, 16302, 16302, 16302, 16298, 16298, 16298, 16298, 16298, 16298, 16298, 16298, 16294, 16294, 16294, 16294, 16294, 16294, 16294, 16294, 16290, 16290, 16290, 16290, 16290, 16290, 16290, 16290, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287);
	test(DC_8x8_16_BIT, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318);
	test(DC_8x8_C_16_BIT, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318);
	test(DC_8x8_D_16_BIT, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318);
	test(DC_8x8_CD_16_BIT, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318, 16318);
	test(DC_8x8_A_16_BIT, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336);
	test(DC_8x8_AC_16_BIT, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336);
	test(DC_8x8_AD_16_BIT, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336);
	test(DC_8x8_ACD_16_BIT, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336, 16336);
	test(DC_8x8_B_16_BIT, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300);
	test(DC_8x8_BD_16_BIT, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300, 16300);
	test(DC_8x8_AB_16_BIT, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192, 8192);
	test(DIAGONAL_DOWN_LEFT_8x8_16_BIT, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16366, 16342, 16346, 16350, 16354, 16358, 16362, 16366, 16370, 16346, 16350, 16354, 16358, 16362, 16366, 16370, 16374, 16350, 16354, 16358, 16362, 16366, 16370, 16374, 16378, 16354, 16358, 16362, 16366, 16370, 16374, 16378, 16380);
	test(DIAGONAL_DOWN_LEFT_8x8_C_16_BIT, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16350, 16342, 16346, 16349, 16350, 16350, 16350, 16350, 16350, 16346, 16349, 16350, 16350, 16350, 16350, 16350, 16350, 16349, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350);
	test(DIAGONAL_DOWN_LEFT_8x8_D_16_BIT, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16366, 16342, 16346, 16350, 16354, 16358, 16362, 16366, 16370, 16346, 16350, 16354, 16358, 16362, 16366, 16370, 16374, 16350, 16354, 16358, 16362, 16366, 16370, 16374, 16378, 16354, 16358, 16362, 16366, 16370, 16374, 16378, 16380);
	test(DIAGONAL_DOWN_LEFT_8x8_CD_16_BIT, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16350, 16342, 16346, 16349, 16350, 16350, 16350, 16350, 16350, 16346, 16349, 16350, 16350, 16350, 16350, 16350, 16350, 16349, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350, 16350);
	test(DIAGONAL_DOWN_RIGHT_8x8_16_BIT, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16314, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16310, 16314, 16318, 16322, 16326, 16330, 16334, 16338, 16306, 16310, 16314, 16318, 16322, 16326, 16330, 16334, 16302, 16306, 16310, 16314, 16318, 16322, 16326, 16330, 16298, 16302, 16306, 16310, 16314, 16318, 16322, 16326, 16294, 16298, 16302, 16306, 16310, 16314, 16318, 16322, 16290, 16294, 16298, 16302, 16306, 16310, 16314, 16318);
	test(DIAGONAL_DOWN_RIGHT_8x8_C_16_BIT, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16314, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16310, 16314, 16318, 16322, 16326, 16330, 16334, 16338, 16306, 16310, 16314, 16318, 16322, 16326, 16330, 16334, 16302, 16306, 16310, 16314, 16318, 16322, 16326, 16330, 16298, 16302, 16306, 16310, 16314, 16318, 16322, 16326, 16294, 16298, 16302, 16306, 16310, 16314, 16318, 16322, 16290, 16294, 16298, 16302, 16306, 16310, 16314, 16318);
	test(VERTICAL_RIGHT_8x8_16_BIT, 16320, 16324, 16328, 16332, 16336, 16340, 16344, 16348, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16314, 16320, 16324, 16328, 16332, 16336, 16340, 16344, 16310, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16306, 16314, 16320, 16324, 16328, 16332, 16336, 16340, 16302, 16310, 16318, 16322, 16326, 16330, 16334, 16338, 16298, 16306, 16314, 16320, 16324, 16328, 16332, 16336, 16294, 16302, 16310, 16318, 16322, 16326, 16330, 16334);
	test(VERTICAL_RIGHT_8x8_C_16_BIT, 16320, 16324, 16328, 16332, 16336, 16340, 16344, 16348, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16346, 16314, 16320, 16324, 16328, 16332, 16336, 16340, 16344, 16310, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16306, 16314, 16320, 16324, 16328, 16332, 16336, 16340, 16302, 16310, 16318, 16322, 16326, 16330, 16334, 16338, 16298, 16306, 16314, 16320, 16324, 16328, 16332, 16336, 16294, 16302, 16310, 16318, 16322, 16326, 16330, 16334);
	test(HORIZONTAL_DOWN_8x8_16_BIT, 16316, 16318, 16322, 16326, 16330, 16334, 16338, 16342, 16312, 16314, 16316, 16318, 16322, 16326, 16330, 16334, 16308, 16310, 16312, 16314, 16316, 16318, 16322, 16326, 16304, 16306, 16308, 16310, 16312, 16314, 16316, 16318, 16300, 16302, 16304, 16306, 16308, 16310, 16312, 16314, 16296, 16298, 16300, 16302, 16304, 16306, 16308, 16310, 16292, 16294, 16296, 16298, 16300, 16302, 16304, 16306, 16289, 16290, 16292, 16294, 16296, 16298, 16300, 16302);
	test(VERTICAL_LEFT_8x8_16_BIT, 16324, 16328, 16332, 16336, 16340, 16344, 16348, 16352, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16328, 16332, 16336, 16340, 16344, 16348, 16352, 16356, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16332, 16336, 16340, 16344, 16348, 16352, 16356, 16360, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16336, 16340, 16344, 16348, 16352, 16356, 16360, 16364, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16366);
	test(VERTICAL_LEFT_8x8_C_16_BIT, 16324, 16328, 16332, 16336, 16340, 16344, 16348, 16350, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16328, 16332, 16336, 16340, 16344, 16348, 16350, 16350, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16332, 16336, 16340, 16344, 16348, 16350, 16350, 16350, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16336, 16340, 16344, 16348, 16350, 16350, 16350, 16350, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16350);
	test(VERTICAL_LEFT_8x8_D_16_BIT, 16325, 16328, 16332, 16336, 16340, 16344, 16348, 16352, 16326, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16328, 16332, 16336, 16340, 16344, 16348, 16352, 16356, 16330, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16332, 16336, 16340, 16344, 16348, 16352, 16356, 16360, 16334, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16336, 16340, 16344, 16348, 16352, 16356, 16360, 16364, 16338, 16342, 16346, 16350, 16354, 16358, 16362, 16366);
	test(VERTICAL_LEFT_8x8_CD_16_BIT, 16325, 16328, 16332, 16336, 16340, 16344, 16348, 16350, 16326, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16328, 16332, 16336, 16340, 16344, 16348, 16350, 16350, 16330, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16332, 16336, 16340, 16344, 16348, 16350, 16350, 16350, 16334, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16336, 16340, 16344, 16348, 16350, 16350, 16350, 16350, 16338, 16342, 16346, 16349, 16350, 16350, 16350, 16350);
	test(HORIZONTAL_UP_8x8_16_BIT, 16312, 16310, 16308, 16306, 16304, 16302, 16300, 16298, 16308, 16306, 16304, 16302, 16300, 16298, 16296, 16294, 16304, 16302, 16300, 16298, 16296, 16294, 16292, 16290, 16300, 16298, 16296, 16294, 16292, 16290, 16289, 16288, 16296, 16294, 16292, 16290, 16289, 16288, 16287, 16287, 16292, 16290, 16289, 16288, 16287, 16287, 16287, 16287, 16289, 16288, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287, 16287);
#undef test
}


